{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 995bf89263c920870ec5","webpack:///./src/index.js","webpack:///./src/parse.js","webpack:///./src/stream.browser.js"],"names":["parse","require","stream","module","exports","sdf","options","include","exclude","filter","modifiers","forEach","dynamicTyping","TypeError","eol","mixedEOL","replace","header","substr","indexOf","sdfParts","split","RegExp","molecules","labels","start","Date","now","i","length","sdfPart","parts","molecule","currentLabels","molfile","j","lines","from","to","label","substring","push","counter","isNumeric","keep","modifier","k","modifiedValue","undefined","isFinite","match","currentLabel","minValue","Infinity","maxValue","value","parseFloat","key","always","statistics","statistic","time","Object","keys"],"mappings":"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","file":"sdf-parser.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SDFParser\"] = factory();\n\telse\n\t\troot[\"SDFParser\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 995bf89263c920870ec5","'use strict';\n\nconst parse = require('./parse');\nconst stream = require('./stream');\n\nmodule.exports = parse;\nparse.stream = stream;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","'use strict';\n\nfunction parse(sdf, options = {}) {\n    const {\n        include,\n        exclude,\n        filter,\n        modifiers = {},\n        forEach = {},\n        dynamicTyping = true\n    } = options;\n\n    if (typeof sdf !== 'string') {\n        throw new TypeError('Parameter \"sdf\" must be a string');\n    }\n\n    var eol = '\\n';\n    if (options.mixedEOL) {\n        sdf = sdf.replace(/\\r\\n/g, '\\n');\n        sdf = sdf.replace(/\\r/g, '\\n');\n    } else {\n        // we will find the delimiter in order to be much faster and not use regular expression\n        var header = sdf.substr(0, 1000);\n        if (header.indexOf('\\r\\n') > -1) {\n            eol = '\\r\\n';\n        } else if (header.indexOf('\\r') > -1) {\n            eol = '\\r';\n        }\n    }\n\n    var sdfParts = sdf.split(new RegExp(eol + '\\\\$\\\\$\\\\$\\\\$.*' + eol));\n    var molecules = [];\n    var labels = {};\n\n    var start = Date.now();\n\n    for (var i = 0; i < sdfParts.length; i++) {\n        var sdfPart = sdfParts[i];\n        var parts = sdfPart.split(eol + '>');\n        if (parts.length > 0 && parts[0].length > 5) {\n            var molecule = {};\n            var currentLabels = [];\n            molecule.molfile = parts[0] + eol;\n            for (var j = 1; j < parts.length; j++) {\n                var lines = parts[j].split(eol);\n                var from = lines[0].indexOf('<');\n                var to = lines[0].indexOf('>');\n                var label = lines[0].substring(from + 1, to);\n                currentLabels.push(label);\n                if (!labels[label]) {\n                    labels[label] = {\n                        counter: 0,\n                        isNumeric: dynamicTyping,\n                        keep: false\n                    };\n                    if (\n                        (!exclude || exclude.indexOf(label) === -1) &&\n                        (!include || include.indexOf(label) > -1)\n                    ) {\n                        labels[label].keep = true;\n                        if (modifiers[label]) labels[label].modifier = modifiers[label];\n                        if (forEach[label]) labels[label].forEach = forEach[label];\n                    }\n                }\n                if (labels[label].keep) {\n                    for (var k = 1; k < lines.length - 1; k++) {\n                        if (molecule[label]) {\n                            molecule[label] += eol + lines[k];\n                        } else {\n                            molecule[label] = lines[k];\n                        }\n                    }\n                    if (labels[label].modifier) {\n                        var modifiedValue = labels[label].modifier(molecule[label]);\n                        if (modifiedValue === undefined || modifiedValue === null) {\n                            delete molecule[label];\n                        } else {\n                            molecule[label] = modifiedValue;\n                        }\n                    }\n                    if (labels[label].isNumeric) {\n                        if (!isFinite(molecule[label]) || molecule[label].match(/^0[0-9]/)) {\n                            labels[label].isNumeric = false;\n                        }\n                    }\n                }\n            }\n            if (!filter || filter(molecule)) {\n                molecules.push(molecule);\n                // only now we can increase the counter\n                for (j = 0; j < currentLabels.length; j++) {\n                    var currentLabel = currentLabels[j];\n                    labels[currentLabel].counter++;\n                }\n            }\n        }\n    }\n\n    // all numeric fields should be converted to numbers\n    for (label in labels) {\n        currentLabel = labels[label];\n        if (currentLabel.isNumeric) {\n            currentLabel.minValue = Infinity;\n            currentLabel.maxValue = -Infinity;\n            for (j = 0; j < molecules.length; j++) {\n                if (molecules[j][label]) {\n                    var value = parseFloat(molecules[j][label]);\n                    molecules[j][label] = value;\n                    if (value > currentLabel.maxValue) currentLabel.maxValue = value;\n                    if (value < currentLabel.minValue) currentLabel.minValue = value;\n                }\n            }\n        }\n    }\n\n    // we check that a label is in all the records\n    for (var key in labels) {\n        if (labels[key].counter === molecules.length) {\n            labels[key].always = true;\n        } else {\n            labels[key].always = false;\n        }\n    }\n\n    var statistics = [];\n    for (key in labels) {\n        var statistic = labels[key];\n        statistic.label = key;\n        statistics.push(statistic);\n    }\n\n    return {\n        time: Date.now() - start,\n        molecules: molecules,\n        labels: Object.keys(labels),\n        statistics: statistics\n    };\n\n}\n\nmodule.exports = parse;\n\n\n\n// WEBPACK FOOTER //\n// ./src/parse.js","'use strict';\n\nmodule.exports = {};\n\n\n\n// WEBPACK FOOTER //\n// ./src/stream.browser.js"],"sourceRoot":""}